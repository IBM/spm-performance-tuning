"use strict";(self.webpackChunkcuram_performance_tuning=self.webpackChunkcuram_performance_tuning||[]).push([[616],{5176:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return l},default:function(){return g}});var r=n(45),a=(n(6540),n(5680)),o=n(4330);const i=["components"],l={},s=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,a.yg)("div",t)},u=s("Tabs"),p=s("Tab"),h=s("Row"),c=s("Column"),m={_frontmatter:l},d=o.A;function g(e){let{components:t}=e,n=(0,r.A)(e,i);return(0,a.yg)(d,Object.assign({},m,n,{components:t,mdxType:"MDXLayout"}),(0,a.yg)("p",null,"If the system throughput is known or a good estimation of the system throughput is available, you can calculate\nthe number of threads that are in the web server. You can do the calculation after the persistent connections are configured."),(0,a.yg)("p",null,"The following formula indicates the total number of threads that are required in the web server:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"Throughput * KeepAliveTimeOut\n")),(0,a.yg)("p",null,"Alternatively, you can use the following formula to obtain a rough starting value for the number of threads\nthat you can use, where ",(0,a.yg)("inlineCode",{parentName:"p"},"WebContainer_max")," is the number of application server threads that are available to process HTTP requests:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"WebContainer_max * KeepAliveTimeOut\n")),(0,a.yg)("p",null,"If the HTTP server load balances against multiple application servers, multiply the number of threads as needed:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"ratio_of_application_servers_per_HTTP_servers * WebContainer_max * KeepAliveTimeOut\n")),(0,a.yg)("p",null,"The previous thread calculation is likely to be too low a number, but you can use it as a quick start. Then,\nrefine the number of threads during load tests or production monitoring by including the 95th percentile of response time through the following heuristic:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"threads = ratio_of_application_servers_per_HTTP_servers * WebContainer_max *\n(KeepAliveTimeOut + user_interaction_95th%ile_response_time)\n")),(0,a.yg)("p",null,"You might need to adjust the number of threads further depending on the following factors:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"The average amount of static content that is in your web pages"),(0,a.yg)("li",{parentName:"ul"},"How well the static content is cached by the web browser")),(0,a.yg)("p",null,"The dependency occurs because some web clients can use multiple connections for retrieving the static content on a web page.\nThe behavior is a strong case for monitoring the HTTP server threads utilization."),(0,a.yg)("p",null,"During monitoring, as a general convention, increase the number of threads only if the following statements are true:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"All threads are active, and no idle threads exists."),(0,a.yg)("li",{parentName:"ul"},"The response time is not acceptable."),(0,a.yg)("li",{parentName:"ul"},"The CPU is not fully utilized.")),(0,a.yg)("p",null,"The procedure for setting the number of threads differs according to the operating system:"),(0,a.yg)(u,{mdxType:"Tabs"},(0,a.yg)(p,{label:"Unix/Linux",mdxType:"Tab"},(0,a.yg)(h,{mdxType:"Row"},(0,a.yg)(c,{mdxType:"Column"},(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"ServerLimit           1\nThreadLimit           300\nStartServers          1\nMaxClients            300\nMinSpareThreads       300\nMaxSpareThreads       300\nThreadsPerChild       300\nMaxRequestsPerChild   0\n"))))),(0,a.yg)(p,{label:"Windows",mdxType:"Tab"},(0,a.yg)(h,{mdxType:"Row"},(0,a.yg)(c,{mdxType:"Column"},(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"ThreadLimit           300\nThreadsPerChild       300\nMaxRequestsPerChild   0\n")))))))}g.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-tunehttp-thread-tuning-mdx-3ab9d18712542b1bb9c0.js.map