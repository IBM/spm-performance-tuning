"use strict";(self.webpackChunkcuram_performance_tuning=self.webpackChunkcuram_performance_tuning||[]).push([[222],{3144:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return s},default:function(){return c}});var n=a(45),r=(a(6540),a(5680)),i=a(4330);const o=["components"],s={},l=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.yg)("div",t)},d=l("AnchorLinks"),p=l("AnchorLink"),g=l("InlineNotification"),m=l("Caption"),y={_frontmatter:s},h=i.A;function c(e){let{components:t}=e,a=(0,n.A)(e,o);return(0,r.yg)(h,Object.assign({},y,a,{components:t,mdxType:"MDXLayout"}),(0,r.yg)(d,{small:!0,mdxType:"AnchorLinks"},(0,r.yg)(p,{mdxType:"AnchorLink"},"Physical database design"),(0,r.yg)(p,{mdxType:"AnchorLink"},"Initialization and tuning parameters for Oracle databases"),(0,r.yg)(p,{mdxType:"AnchorLink"},"Statistics")),(0,r.yg)("p",null,"The following maintenance and database design guidelines apply to tuning Oracle databases."),(0,r.yg)(g,{kind:"warning",mdxType:"InlineNotification"},(0,r.yg)("p",null,"Database tuning provided in this guidance is not comprehensive."),(0,r.yg)("p",null,"However, the following values are a starting point for how to configure a performant database for Cúram.\nIt is our recommendation that project teams verify their own tuning, and where necessary adapt and expand the configuration based on their own requirements prior to going in to production.")),(0,r.yg)("h2",null,"Physical database design"),(0,r.yg)("p",null,"In addition to physical database design that is done as part of the project, experience shows that the database\ndesign has benefits in reducing contention on hot index blocks (cache buffer chain). To achieve this benefit, create\na 2 K block table space for indexes, and move indexes to that 2 K block index table space."),(0,r.yg)("h2",null,"Initialization and tuning parameters for Oracle databases"),(0,r.yg)("p",null,"The application server for Cúram uses JDBC connection pooling and prepared statement caching.\nAt bare minimum, review and adjust the ",(0,r.yg)("inlineCode",{parentName:"p"},"PROCESSES")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"OPEN_CURSORS")," parameters from the following list according to your system requirements."),(0,r.yg)("p",null,"You can use the following guidance when you are deciding which values to apply for ",(0,r.yg)("inlineCode",{parentName:"p"},"PROCESSES")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"OPEN_CURSORS")," on your system.\nIn addition to these two basic parameters, check the parameters that are referenced in the following table, and adjust the parameters if necessary."),(0,r.yg)("h3",null,"PROCESSES"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"PROCESSES")," specifies the maximum number of operating system user processes that can simultaneously connect to Oracle.\nIts value must allow for all background processes such as locks, job queue processes, and parallel execution processes.\nThis parameter is operating system dependent. The default values of the ",(0,r.yg)("inlineCode",{parentName:"p"},"SESSIONS")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"TRANSACTIONS")," parameters are derived\nfrom this parameter. If you change the value of ",(0,r.yg)("inlineCode",{parentName:"p"},"PROCESSES"),", evaluate whether to adjust the values of those derived parameters."),(0,r.yg)("p",null,"You can use the following guidance to set a value for ",(0,r.yg)("inlineCode",{parentName:"p"},"PROCESSES"),":"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},"PROCESSES > MAX\n")),(0,r.yg)("p",null,"where"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},"MAX=NUMBER OF APPLICATION SERVERS * NUMBER OF POOLED JDBC CONNECTIONS\n")),(0,r.yg)("p",null,"or"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},"MAX=NUMBER OF BATCH STREAMS * 3\n")),(0,r.yg)(g,{mdxType:"InlineNotification"},(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Note:")," Increasing the number of processes leads to greater memory consumption. Consult with your database administrator before you make any changes.")),(0,r.yg)("h3",null,"OPEN_CURSORS"),(0,r.yg)("p",null,"Oracle creates a memory area (context area) for processing SQL statements. The value of ",(0,r.yg)("inlineCode",{parentName:"p"},"OPEN_CURSORS")," must\nbe set high enough to prevent your application from running out of open cursors. Assuming that a session does\nnot open the number of cursors that are specified by ",(0,r.yg)("inlineCode",{parentName:"p"},"OPEN_CURSORS"),", there is no added overhead to setting\nthis value higher than needed. The following guidance can be used to set a value for ",(0,r.yg)("inlineCode",{parentName:"p"},"OPEN_CURSORS"),":"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},"OPEN_CURSORS >= NUMBER OF OVERALL EXPECTED DBCONNECTIONS\n")),(0,r.yg)("p",null,"or"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},"OPEN_CURSORS > JDBC/CURAMDB PREPARED STATEMENT CACHE SIZE\n")),(0,r.yg)("h3",null,"SESSIONS"),(0,r.yg)("p",null,"This parameter modifies the number of sessions that are allowed by Oracle at database level."),(0,r.yg)(g,{mdxType:"InlineNotification"},(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Note:")," Setting the number of allowed processes automatically sets the appropriate number of sessions, which is the\nrecommended way of tuning this parameter. Oracle does not recommend setting this parameter explicitly.")),(0,r.yg)("h3",null,"EVENTS"),(0,r.yg)("p",null,"This parameter is used to reduce contention that is caused by LOB management. To identify the number of chunks to\nbe cleaned up each time a reclamation operation is performed, set ",(0,r.yg)("inlineCode",{parentName:"p"},"EVENT 44951")," to a value in the range ",(0,r.yg)("inlineCode",{parentName:"p"},"1 - 1024"),".\nIn turn, this parameter reduces the number of requests against the high watermark enqueue."),(0,r.yg)("h3",null,"DB_BLOCK_SIZE"),(0,r.yg)("p",null,"This parameter controls the size of the default data block size at the time of database creation. If the database exists,\nthis value cannot be changed: a new database needs to be created with a different block size. Since Oracle 10g Release 2,\neach table space can have a different block size."),(0,r.yg)("p",null,"However, the block size still needs to be chosen wisely. Performance tests showed that decreasing the block size decreases threads contention. The ",(0,r.yg)("inlineCode",{parentName:"p"},"DB_BLOCK_SIZE")," default value is ",(0,r.yg)("inlineCode",{parentName:"p"},"8192"),". The value of this parameter must be a multiple of the physical block size at the device level."),(0,r.yg)("p",null,"Our suggestion is to set the parameter to the lowest possible value."),(0,r.yg)("h3",null,"DISK_ASYNCH_IO"),(0,r.yg)("p",null,"Much CPU time can be wasted on asynchronous I/O on systems that support it. We suggest setting the ",(0,r.yg)("inlineCode",{parentName:"p"},"DISK_ASYNCH_IO")," parameter to ",(0,r.yg)("inlineCode",{parentName:"p"},"FALSE"),"."),(0,r.yg)(g,{mdxType:"InlineNotification"},(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Note:")," With ",(0,r.yg)("inlineCode",{parentName:"p"},"DISK_ASYNCH_IO")," off, you should set the ",(0,r.yg)("inlineCode",{parentName:"p"},"DBWR_IO_SLAVES")," parameter to a value other than its default of ",(0,r.yg)("inlineCode",{parentName:"p"},"0"),", to simulate asynchronous I/O.")),(0,r.yg)("h3",null,"DBWR_IO_SLAVES"),(0,r.yg)("p",null,"This parameter is relevant only on systems with only one database writer process (",(0,r.yg)("inlineCode",{parentName:"p"},"DBW0"),"). It specifies the number of I/O\nserver processes that are used by the ",(0,r.yg)("inlineCode",{parentName:"p"},"DBW0")," process. The ",(0,r.yg)("inlineCode",{parentName:"p"},"DBW0")," process and its server processes always write to disk.\nBy default, the value is ",(0,r.yg)("inlineCode",{parentName:"p"},"0")," and I/O server processes are not used. ",(0,r.yg)("inlineCode",{parentName:"p"},"DBWR_IO_SLAVES")," should be set and tuned when\nsimulating asynchronous I/O, for example, with ",(0,r.yg)("inlineCode",{parentName:"p"},"DISK_ASYNCH_IO=FALSE"),". Performance tests have shown that\nsetting ",(0,r.yg)("inlineCode",{parentName:"p"},"DBWR_IO_SLAVE")," to ",(0,r.yg)("inlineCode",{parentName:"p"},"20")," yields good performance."),(0,r.yg)("p",null,"In addition to the parameters mentioned previously, a number of other important Oracle tuning parameters are available\nthat you can review and adjust, if necessary. The following table summarizes the tuneable parameters."),(0,r.yg)(m,{mdxType:"Caption"},(0,r.yg)("p",null,(0,r.yg)("em",{parentName:"p"},"Table 1:")," Oracle tuning parameters")),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:"left"},"Tuning parameter"),(0,r.yg)("th",{parentName:"tr",align:"left"},"Description and use"),(0,r.yg)("th",{parentName:"tr",align:"left"},"Recommended value"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"PROCESSES")),(0,r.yg)("td",{parentName:"tr",align:"left"},"Specifies the maximum number of operating system user processes that can simultaneously connect to Oracle"),(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"PROCESSES > MAX")," where ",(0,r.yg)("inlineCode",{parentName:"td"},"MAX=NUMBER OF APPLICATION SERVERS * NUMBER OF POOLED JDBC CONNECTIONS")," or  ",(0,r.yg)("inlineCode",{parentName:"td"},"MAX=NUMBER OF BATCH STREAMS * 3"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"SESSIONS")),(0,r.yg)("td",{parentName:"tr",align:"left"},"Modifies the number of sessions that are allowed by Oracle at database level."),(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)(g,{kind:"warning",mdxType:"InlineNotification"}," ",(0,r.yg)("strong",{parentName:"td"},"Note:")," Setting this parameter explicitly is not recommended. "))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"OPEN_CURSORS")),(0,r.yg)("td",{parentName:"tr",align:"left"},"Controls the size of the memory area (context area) for processing SQL statements."),(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"open_cursors >= number of overall expected dbconnections")," or ",(0,r.yg)("inlineCode",{parentName:"td"},"open_cursors > jdbc/curamdb prepared statement cache size"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"EVENTS")),(0,r.yg)("td",{parentName:"tr",align:"left"},"Set to reduce contention caused by LOB management."),(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"SET EVENTS ='44951 TRACE NAME CONTEXT FOREVER, LEVEL 1024'"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"DB_BLOCK_SIZE")),(0,r.yg)("td",{parentName:"tr",align:"left"},"Controls the size of the default data block size at the time of database creation."),(0,r.yg)("td",{parentName:"tr",align:"left"},"Set to the lowest possible value (2048): ",(0,r.yg)("inlineCode",{parentName:"td"},"DB_BLOCK_SIZE = 2048"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"FAST_START_MTTR_TARGET")),(0,r.yg)("td",{parentName:"tr",align:"left"},"Specifies the number of seconds that the database takes to perform crash recovery of a single instance. ",(0,r.yg)("inlineCode",{parentName:"td"},"FAST_START_MTTR_TARGET=60")," for approximately 100 MB files. ",(0,r.yg)("inlineCode",{parentName:"td"},"FAST_START_MTTR_TARGET=300")," for approximately 500 MB files. Check the size of log files with: ",(0,r.yg)("inlineCode",{parentName:"td"},"select * from V$LOG")),(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"FAST_START_MTTR_TARGET=300"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"DISK_ASYNCH_IO")),(0,r.yg)("td",{parentName:"tr",align:"left"},"Controls whether I/O to data files, control files, and log files is asynchronous."),(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"DISK_ASYNCH_IO=false"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"DBWR_IO_SLAVES")),(0,r.yg)("td",{parentName:"tr",align:"left"},"Specifies the number of I/O server processes that are used by the DBW0 process."),(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"DBWR_IO_SLAVES = 20"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"DB_WRITER_PROCESSES")),(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"DB_WRITER_PROCESSES")," (DBWR) manages the “dirty block” cleanouts from the data buffer. Very few tuning options exist except adjusting the number of DBWR processes.",(0,r.yg)("inlineCode",{parentName:"td"},"DB_WRITER_PROCESSES")," cannot exceed a value of 20."),(0,r.yg)("td",{parentName:"tr",align:"left"},"The default value is the larger value of either: ",(0,r.yg)("inlineCode",{parentName:"td"},"DB_WRITER_PROCESSES = 1")," or ",(0,r.yg)("inlineCode",{parentName:"td"},"CPU_COUNT/8"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"IDLE_TIME")),(0,r.yg)("td",{parentName:"tr",align:"left"},"Set to greater or equal to the timeout that is set on WebSphere® Application Server."),(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"ALTER PROFILE DEFAULT LIMIT IDLE_TIME n")," Set the value to greater than or equal to the  WebSphere Application Server timeout.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"LOG_BUFFER")),(0,r.yg)("td",{parentName:"tr",align:"left"},"Specifies the amount of memory in bytes that Oracle uses when buffering redo entries to a redo log file. The database chooses an appropriate default based on the server specification. In our tests, we set this parameter with positive results for performance. Consult your database administrator to determine whether setting this parameter is appropriate in your environment."),(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)(g,{kind:"warning",mdxType:"InlineNotification"},(0,r.yg)("strong",{parentName:"td"},"Note:")," In newer releases of Oracle, ",(0,r.yg)("strong",{parentName:"td"},"do not")," set ",(0,r.yg)("inlineCode",{parentName:"td"},"LOG_BUFFER"),". "))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"DB_CACHE_SIZE")),(0,r.yg)("td",{parentName:"tr",align:"left"},"Use the DB cache advisor (",(0,r.yg)("inlineCode",{parentName:"td"},"V$DB_CACHE_ADVICE view"),") to see whether any benefit can be gained from increasing the size of the buffer cache. Consult your database administrator to determine whether setting this parameter is appropriate in your environment."),(0,r.yg)("td",{parentName:"tr",align:"left"},"No recommendation because the parameter is system-dependent.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"TABLESPACE DATAFILES")),(0,r.yg)("td",{parentName:"tr",align:"left"},"More data files results in less write contention. Consult your database administrator to determine whether setting this parameter is appropriate in your environment."),(0,r.yg)("td",{parentName:"tr",align:"left"},"No recommendation because the parameter is system-dependent.")))),(0,r.yg)("h2",null,"Statistics"),(0,r.yg)("p",null,"The database optimizer relies on database statistics to determine which indexes are used for data access.\nIf the database statistics are not up-to-date, the correct indexes might not be used. In this case, the performance\nof the system degrades, and at worst the system becomes unstable. It is important to ensure that database statistics\nare run and gathered frequently. The general convention is that database statistics are gathered on a table when 10%\nor more of the data on that table changes. Typical examples in Cúram are to run statistic in the early life of the system and after some batch job executions."),(0,r.yg)("p",null,"More specifically, initially many tables in the Cúram database are empty or have a low number of rows. Therefore, before you turn on a production or test system,\nyou must run and gather database statistics. During the first hours and days that the system is used, run and gather database statistics often, at least daily."))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-common-task-dbconfig-oracle-mdx-520af0d037fdef2b4a01.js.map