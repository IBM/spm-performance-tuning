{"version":3,"file":"component---src-pages-openshift-tune-xmlserver-tune-xmlserver-mdx-d288e9f5ab97e3e3625c.js","mappings":"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","sources":["webpack://curam-performance-tuning/./src/pages/openshift/tune_xmlserver/tune_xmlserver.mdx"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/curam-performance-tuning/curam-performance-tuning/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\nconst AnchorLinks = makeShortcode(\"AnchorLinks\");\nconst AnchorLink = makeShortcode(\"AnchorLink\");\nconst InlineNotification = makeShortcode(\"InlineNotification\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <AnchorLinks small mdxType=\"AnchorLinks\">\n  <AnchorLink mdxType=\"AnchorLink\">Overview</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Replicas</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Pod requests and limits</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Tuning the XML server running in a pod</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Assessing XML server performance</AnchorLink>\n    </AnchorLinks>\n    <h2>{`Overview`}</h2>\n    <p>{`The following information is specific for the tuning of the Cúram XML server on OpenShift and Kubernetes Services.`}</p>\n    <p>{`Additionally, the general XML server tuning information is available in the `}<a parentName=\"p\" {...{\n        \"href\": \"/curam-performance-tuning/common_task/xmlservertuning\"\n      }}>{`Tuning the XML server`}</a>{` section of this guide.`}</p>\n    <h2>{`Pod replica count`}</h2>\n    <p>{`The number of XML Server replicas in a deployment can be specified globally via `}<inlineCode parentName=\"p\">{`xmlserver.replicaCount`}</inlineCode>{`, which can be used to amend the default single instance.`}</p>\n    <h2>{`Pod requests and limits`}</h2>\n    <p>{`When assessing XML server performance and the setting of XML server pod requests and limits, note that additional replicas are automatically load balanced via the `}<inlineCode parentName=\"p\">{`release-xmlserver`}</inlineCode>{` service.`}</p>\n    <p>{`The XML server pod `}<inlineCode parentName=\"p\">{`cpu`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`memory`}</inlineCode>{` resource requests and limits can be specified by setting `}<inlineCode parentName=\"p\">{`cpu`}</inlineCode>{`: and `}<inlineCode parentName=\"p\">{`memory`}</inlineCode>{`: values for the `}<inlineCode parentName=\"p\">{`xmlserver.resources`}</inlineCode>{` keys.`}</p>\n    <p>{`The following example illustrates how to set the number of replicas to `}<inlineCode parentName=\"p\">{`6`}</inlineCode>{`, with resources requests for the `}<inlineCode parentName=\"p\">{`cpu`}</inlineCode>{` of 1 and a `}<inlineCode parentName=\"p\">{`memory`}</inlineCode>{` of 1024Mi, and with resources limits for the `}<inlineCode parentName=\"p\">{`cpu`}</inlineCode>{` of 1 and a `}<inlineCode parentName=\"p\">{`memory`}</inlineCode>{` of 1024Mi:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`xmlserver:\n  replicaCount: 6\n  resources:\n    requests:\n      cpu: 1\n      memory: 1024Mi\n    limits:\n      cpu: 1\n      memory: 1024Mi\n`}</code></pre>\n    <InlineNotification kind=\"warning\" mdxType=\"InlineNotification\">\n      <p>{`For the Guaranteed QoS, Cúram highly recommends that a pod must have `}<strong parentName=\"p\">{`both`}</strong>{` CPU and Memory requests and limits set to equal values. If requests & limits are different for a given pod, it would be eligible for rescheduling in case of resource pressure on its node.`}</p>\n      <p>{`For more information please review `}<a parentName=\"p\" {...{\n          \"href\": \"https://kubernetes.io/docs/tasks/configure-pod-container/quality-service-pod/#create-a-pod-that-gets-assigned-a-qos-class-of-guaranteed\"\n        }}>{`Configure Quality of Service for Pods`}</a>{`.`}</p>\n    </InlineNotification>\n    <h2>{`Tuning the XML server running in a pod`}</h2>\n    <p>{`The XML server provides two areas for tuning:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`The XML server configuration`}</li>\n      <li parentName=\"ol\">{`The JVM in which the XML server runs`}</li>\n    </ol>\n    <p>{`Specific settings for each of these areas are available via Helm Chart overrides.  For more information about Helm Charts see the Cúram on Kubernetes Runbook:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`The `}<a parentName=\"li\" {...{\n          \"href\": \"https://merative.github.io/spm-kubernetes/deployment/config-reference/#xml-server\"\n        }}>{`Configuration Reference`}</a>{` section lists the Helm Chart settings and their default values for the configuration that follows;`}</li>\n      <li parentName=\"ul\">{`The `}<a parentName=\"li\" {...{\n          \"href\": \"https://merative.github.io/spm-kubernetes/deployment/hc_deployment/\"\n        }}>{`Deploying Helm Charts`}</a>{` section describes how to specify Helm Chart overrides in an override file.`}</li>\n    </ul>\n    <h3>{`XML server configuration`}</h3>\n    <p>{`These are configuration settings of the XML server, accessible via Helm Chart overrides, that can be used to tune its performance:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`XML server thread pool size - This setting essentially controls the amount of work the XML server can do.`}</li>\n      <li parentName=\"ul\">{`XML server thread pool queue size - This setting controls the number of requests that are queued inside the XML server as opposed to the TCP backlog queue.`}</li>\n      <li parentName=\"ul\">{`XML server socket timeout - This setting (expressed as milliseconds) determines the length of time the XML server will wait for a socket request to complete.`}</li>\n    </ul>\n    <p>{`The Cúram Helm Charts are coded to be able to specify `}<inlineCode parentName=\"p\">{`threadPoolSize`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`threadPoolQueueSize`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`socketTimeout`}</inlineCode>{`. For instance, this shows the default settings for `}<inlineCode parentName=\"p\">{`xmlserver`}</inlineCode>{` application pods:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`xmlserver:\n  config:\n    threadPoolSize: 5\n    threadPoolQueueSize: 200\n    socketTimeout: 60000\n`}</code></pre>\n    <h3>{`XML server JVM`}</h3>\n    <p>{`These are Java JVM settings, accessbile via Helm Chart overrides, that can be used to tune its performance:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Java maximum heap - This setting maps to the the `}<inlineCode parentName=\"li\">{`maxmemory`}</inlineCode>{` attribute of the Ant `}<inlineCode parentName=\"li\">{`<java>`}</inlineCode>{` task in the XML server `}<inlineCode parentName=\"li\">{`xmlserver.xml`}</inlineCode>{` Ant script, which is invoked when the pod is started. (Note: Ant’s `}<inlineCode parentName=\"li\">{`maxmemory`}</inlineCode>{` attribute overrides the JVM `}<inlineCode parentName=\"li\">{`-Xmx`}</inlineCode>{` setting.)`}</li>\n      <li parentName=\"ul\">{`Java thread stack size - This maps to  the specification of the JVM stack size argument, `}<inlineCode parentName=\"li\">{`-Xss`}</inlineCode>{`, specified as an Ant property override; for example: `}<inlineCode parentName=\"li\">{`-Djava.thread.stack.size=\"-Xss4m\"`}</inlineCode></li>\n    </ul>\n    <p>{`The Cúram Helm Charts are coded to be able to specify the JVM `}<inlineCode parentName=\"p\">{`maxMemory`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`threadStackSize`}</inlineCode>{`. For instance, this shows the default settings for `}<inlineCode parentName=\"p\">{`xmlserver`}</inlineCode>{` application pods:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`xmlserver:\n  jvm:\n    maxMemory: '-Djava.maxmemory=768m'\n    threadStackSize: '-Djava.thread.stack.size=-Xss4m'\n`}</code></pre>\n    <h2>{`Assessing XML server performance`}</h2>\n    <p>{`The following data can help you assess when tuning may be called for (note limited data availability when not using persistence):`}</p>\n    <ul>\n      <li parentName=\"ul\">{`JVM verbose garbage collection data is your primary source of information on whether the Java heap is sized appropriately.`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Availability of data:`}\n            <ul parentName=\"li\">\n              <li parentName=\"ul\">{`When persistence is configured `}<inlineCode parentName=\"li\">{`verbosegc.log`}</inlineCode>{` can be found in the persistent `}<inlineCode parentName=\"li\">{`gc`}</inlineCode>{` folder of the XML server pod.`}</li>\n              <li parentName=\"ul\">{`When persistence is not configured `}<inlineCode parentName=\"li\">{`verbosegc.log`}</inlineCode>{` can be found in the `}<inlineCode parentName=\"li\">{`/opt/ibm/Curam/xmlserver/tmp`}</inlineCode>{` folder of the XML server pod during its execution.`}</li>\n            </ul>\n          </li>\n          <li parentName=\"ul\">{`To process the data you can use the\n`}<a parentName=\"li\" {...{\n              \"href\": \"https://www.ibm.com/support/pages/garbage-collection-and-memory-visualizer-gcmv-2701-ibm-support-assistant-team-server\"\n            }}>{`IBM Garbage Collection and Memory Visualizer (GCMV)`}</a>{` tool.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">{`XML server thread pool worker data is your primary source of information on how the XML server is performing, which can be impacted by, among other factors, how the JVM is performing.`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Availability of data:`}\n            <ul parentName=\"li\">\n              <li parentName=\"ul\">{`When persistence is configured the `}<inlineCode parentName=\"li\">{`ThreadPoolWorker-*`}</inlineCode>{` files can be found in the persistent `}<inlineCode parentName=\"li\">{`stats`}</inlineCode>{` folder of the XML server pod after it has been stopped.`}</li>\n              <li parentName=\"ul\">{`When persistence is not configured there is no data available.`}</li>\n            </ul>\n          </li>\n          <li parentName=\"ul\">{`To process the data you can use text-based tools such as `}<a parentName=\"li\" {...{\n              \"href\": \"https://en.wikipedia.org/wiki/AWK\"\n            }}>{`awk`}</a>{` as the data in the `}<inlineCode parentName=\"li\">{`ThreadPoolWorker-*`}</inlineCode>{` files\nis tab-delimited, one file per thread (as specified by `}<a parentName=\"li\" {...{\n              \"href\": \"/curam-performance-tuning/common_task/xmlservertuning#tuning-and-configuration-changes\"\n            }}>{`<THREAD_POOL_SIZE>`}</a>{`).`}</li>\n        </ul>\n      </li>\n    </ul>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","makeShortcode","name","props","console","warn","mdx","AnchorLinks","AnchorLink","InlineNotification","layoutProps","MDXLayout","DefaultLayout","MDXContent","_ref","components","_objectWithoutProperties","_excluded","Object","assign","mdxType","small","parentName","kind","isMDXComponent"],"sourceRoot":""}