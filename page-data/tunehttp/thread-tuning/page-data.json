{"componentChunkName":"component---src-pages-tunehttp-thread-tuning-mdx","path":"/tunehttp/thread-tuning/","result":{"pageContext":{"frontmatter":{"title":"Adjusting thread tuning","description":"Adjusting thread tuning","tabs":["HTTP Server","HTTP Caching","HTTP Compression","HTTP Monitoring","Persistent Connections","Thread Tuning"]},"relativePagePath":"/tunehttp/thread-tuning.mdx","titleType":"page","MdxNode":{"id":"797c577f-9b02-5b60-8cac-42343db64f3a","children":[],"parent":"ef10fc53-bfac-5bdc-8af6-5dd45d1a85c7","internal":{"content":"---\ntitle: Adjusting thread tuning\ndescription: Adjusting thread tuning\ntabs: ['HTTP Server','HTTP Caching','HTTP Compression', 'HTTP Monitoring', 'Persistent Connections','Thread Tuning']\n---\n\nIf the system throughput is known or a good estimation of the system throughput is available, you can calculate\nthe number of threads that are in the web server. You can do the calculation after the persistent connections are configured.\n\nThe following formula indicates the total number of threads that are required in the web server:\n\n```\nThroughput * KeepAliveTimeOut\n```\n\nAlternatively, you can use the following formula to obtain a rough starting value for the number of threads\nthat you can use, where `WebContainer_max` is the number of application server threads that are available to process HTTP requests:\n\n```\nWebContainer_max * KeepAliveTimeOut\n```\n\nIf the HTTP server load balances against multiple application servers, multiply the number of threads as needed:\n\n```\nratio_of_application_servers_per_HTTP_servers * WebContainer_max * KeepAliveTimeOut\n```\n\nThe previous thread calculation is likely to be too low a number, but you can use it as a quick start. Then,\nrefine the number of threads during load tests or production monitoring by including the 95th percentile of response time through the following heuristic:\n\n```\nthreads = ratio_of_application_servers_per_HTTP_servers * WebContainer_max *\n(KeepAliveTimeOut + user_interaction_95th%ile_response_time)\n```\n\nYou might need to adjust the number of threads further depending on the following factors:\n\n* The average amount of static content that is in your web pages\n* How well the static content is cached by the web browser\n\nThe dependency occurs because some web clients can use multiple connections for retrieving the static content on a web page.\nThe behavior is a strong case for monitoring the HTTP server threads utilization.\n\nDuring monitoring, as a general convention, increase the number of threads only if the following statements are true:\n\n* All threads are active, and no idle threads exists.\n* The response time is not acceptable.\n* The CPU is not fully utilized.\n\nThe procedure for setting the number of threads differs according to the operating system:\n\n<Tabs>\n\n<Tab label=\"Unix/Linux\">\n<Row>\n<Column>\n\n```\nServerLimit           1\nThreadLimit           300\nStartServers          1\nMaxClients            300\nMinSpareThreads       300\nMaxSpareThreads       300\nThreadsPerChild       300\nMaxRequestsPerChild   0\n```\n\n</Column>\n</Row>\n</Tab>\n\n<Tab label=\"Windows\">\n<Row>\n<Column>\n\n```\nThreadLimit           300\nThreadsPerChild       300\nMaxRequestsPerChild   0\n```\n\n</Column>\n</Row>\n</Tab>\n\n</Tabs>\n","type":"Mdx","contentDigest":"d878104806ac2a0d122ffdfcf4e11884","owner":"gatsby-plugin-mdx","counter":135},"frontmatter":{"title":"Adjusting thread tuning","description":"Adjusting thread tuning","tabs":["HTTP Server","HTTP Caching","HTTP Compression","HTTP Monitoring","Persistent Connections","Thread Tuning"]},"exports":{},"rawBody":"---\ntitle: Adjusting thread tuning\ndescription: Adjusting thread tuning\ntabs: ['HTTP Server','HTTP Caching','HTTP Compression', 'HTTP Monitoring', 'Persistent Connections','Thread Tuning']\n---\n\nIf the system throughput is known or a good estimation of the system throughput is available, you can calculate\nthe number of threads that are in the web server. You can do the calculation after the persistent connections are configured.\n\nThe following formula indicates the total number of threads that are required in the web server:\n\n```\nThroughput * KeepAliveTimeOut\n```\n\nAlternatively, you can use the following formula to obtain a rough starting value for the number of threads\nthat you can use, where `WebContainer_max` is the number of application server threads that are available to process HTTP requests:\n\n```\nWebContainer_max * KeepAliveTimeOut\n```\n\nIf the HTTP server load balances against multiple application servers, multiply the number of threads as needed:\n\n```\nratio_of_application_servers_per_HTTP_servers * WebContainer_max * KeepAliveTimeOut\n```\n\nThe previous thread calculation is likely to be too low a number, but you can use it as a quick start. Then,\nrefine the number of threads during load tests or production monitoring by including the 95th percentile of response time through the following heuristic:\n\n```\nthreads = ratio_of_application_servers_per_HTTP_servers * WebContainer_max *\n(KeepAliveTimeOut + user_interaction_95th%ile_response_time)\n```\n\nYou might need to adjust the number of threads further depending on the following factors:\n\n* The average amount of static content that is in your web pages\n* How well the static content is cached by the web browser\n\nThe dependency occurs because some web clients can use multiple connections for retrieving the static content on a web page.\nThe behavior is a strong case for monitoring the HTTP server threads utilization.\n\nDuring monitoring, as a general convention, increase the number of threads only if the following statements are true:\n\n* All threads are active, and no idle threads exists.\n* The response time is not acceptable.\n* The CPU is not fully utilized.\n\nThe procedure for setting the number of threads differs according to the operating system:\n\n<Tabs>\n\n<Tab label=\"Unix/Linux\">\n<Row>\n<Column>\n\n```\nServerLimit           1\nThreadLimit           300\nStartServers          1\nMaxClients            300\nMinSpareThreads       300\nMaxSpareThreads       300\nThreadsPerChild       300\nMaxRequestsPerChild   0\n```\n\n</Column>\n</Row>\n</Tab>\n\n<Tab label=\"Windows\">\n<Row>\n<Column>\n\n```\nThreadLimit           300\nThreadsPerChild       300\nMaxRequestsPerChild   0\n```\n\n</Column>\n</Row>\n</Tab>\n\n</Tabs>\n","fileAbsolutePath":"/home/runner/work/curam-performance-tuning/curam-performance-tuning/src/pages/tunehttp/thread-tuning.mdx"}}},"staticQueryHashes":["1364590287","137577622","2102389209","2456312558","2746626797","3018647132","3037994772","56986546","768070550"]}